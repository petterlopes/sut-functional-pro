var x={"Content-Type":"application/json"},S=/\/*$/;function g(s={}){let{fetch:r=globalThis.fetch,querySerializer:n,bodySerializer:a,...p}=s;async function o(e,t){let{headers:T,body:u,params:l={},parseAs:d="json",querySerializer:O=n??F,bodySerializer:R=a??q,...b}=t||{},m=M(e,{baseUrl:p.baseUrl,params:l,querySerializer:O}),P=z(x,s?.headers,T,l.header),y={redirect:"follow",...p,...b,headers:P};u&&(y.body=R(u)),y.body instanceof FormData&&P.delete("Content-Type");let i=await r(m,y);if(i.status===204||i.headers.get("Content-Length")==="0")return i.ok?{data:{},response:i}:{error:{},response:i};if(i.ok){let f=i.body;if(d!=="stream"){let c=i.clone();f=typeof c[d]=="function"?await c[d]():await c.text()}return{data:f,response:i}}let h={};try{h=await i.clone().json()}catch{h=await i.clone().text()}return{error:h,response:i}}return{async GET(e,t){return o(e,{...t,method:"GET"})},async PUT(e,t){return o(e,{...t,method:"PUT"})},async POST(e,t){return o(e,{...t,method:"POST"})},async DELETE(e,t){return o(e,{...t,method:"DELETE"})},async OPTIONS(e,t){return o(e,{...t,method:"OPTIONS"})},async HEAD(e,t){return o(e,{...t,method:"HEAD"})},async PATCH(e,t){return o(e,{...t,method:"PATCH"})},async TRACE(e,t){return o(e,{...t,method:"TRACE"})}}}function F(s){let r=new URLSearchParams;if(s&&typeof s=="object")for(let[n,a]of Object.entries(s))a!=null&&r.set(n,a);return r.toString()}function q(s){return JSON.stringify(s)}function M(s,r){let n=`${r.baseUrl?r.baseUrl.replace(S,""):""}${s}`;if(r.params.path)for(let[a,p]of Object.entries(r.params.path))n=n.replace(`{${a}}`,encodeURIComponent(String(p)));if(r.params.query){let a=r.querySerializer(r.params.query);a&&(n+=`?${a}`)}return n}function z(...s){let r=new Headers;for(let n of s){if(!n||typeof n!="object")continue;let a=n instanceof Headers?n.entries():Object.entries(n);for(let[p,o]of a)o===null?r.delete(p):o!==void 0&&r.set(p,o)}return r}export{M as createFinalURL,g as default,q as defaultBodySerializer,F as defaultQuerySerializer,z as mergeHeaders};
